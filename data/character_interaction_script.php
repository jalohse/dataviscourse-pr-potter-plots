<?php

$files = glob('../books/*.{txt}', GLOB_BRACE);
foreach($files as $file) {
    if(strpos($file, 'sorcerers_stone.txt')) {
        echo $file;
        $text = file_get_contents($file);
        $text = preg_replace('/".*?"/m', '', $text);
        $chapters = explode("CHAPTER", $text);
        if (count($chapters) == 1) {
            $chapters = explode("Chapter", $text);
        }
        $characters = [
            "Hannah Abbott",
            "Ludo Bagman",
            "Lavender Brown",
            "Irma Pince",
            "Poppy Pomfrey",
            "Harry Potter",
            "James Potter",
            "Lily Potter",
            "Quirinus Quirrell",
            "Millicent Bulstrode",
            "Helena Ravenclaw",
            "Rowena Ravenclaw",
            "Mary Riddle",
            "Thomas Riddle",
            "Tom Riddle Sr.",
            "Lord Voldemort",
            "Augustus Rookwood",
            "Newt Scamander",
            "Rufus Scrimgeour",
            "Kingsley Shacklebolt",
            "Charity Burbage",
            "Stan Shunpike",
            "Rita Skeeter",
            "Horace Slughorn",
            "Salazar Slytherin",
            "Hepzibah Smith",
            "Zacharias Smith",
            "Severus Snape",
            "Alicia Spinnet",
            "Pomona Sprout",
            "Pius Thicknesse",
            "Frank Bryce",
            "Dean Thomas",
            "Andromeda Tonks",
            "Nymphadora Tonks",
            "Ted Tonks",
            "Sybill Trelawney",
            "Dolores Umbridge",
            "Romilda Vane",
            "Septima Vector",
            "Arthur Weasley",
            "Alecto Carrow",
            "Bill Weasley",
            "Charlie Weasley",
            "Fred Weasley",
            "George Weasley",
            "Ginny Weasley",
            "Molly Weasley",
            "Percy Weasley",
            "Ron Weasley",
            "Oliver Wood",
            "Blaise Zabini",
            "Amycus Carrow",
            "Aragog",
            "Bane",
            "Bloody Baron",
            "Buckbeak",
            "Sir Cadogan",
            "Crookshanks",
            "Dobby",
            "Fang",
            "Fat Friar",
            "Fat Lady",
            "Reginald Cattermole",
            "Fawkes",
            "Firenze",
            "Fluffy",
            "Grawp",
            "Griphook",
            "Hedwig",
            "Kreacher",
            "Moaning Myrtle",
            "Mrs. Norris",
            "Nagini",
            "Mary Cattermole",
            "Nicholas de Mimsy-Porpington",
            "Norbert",
            "Peeves",
            "Madam Rosmerta",
            "Scabbers",
            "Trevor",
            "Winky",
            "Wormtail",
            "Cho Chang",
            "Penelope Clearwater",
            "Bathilda Bagshot",
            "Michael Corner",
            "Vincent Crabbe, Sr.",
            "Vincent Crabbe",
            "Colin Creevey",
            "Dirk Cresswell",
            "Barty Crouch Sr.",
            "Barty Crouch Jr.",
            "Fleur Delacour",
            "Gabrielle Delacour",
            "Dedalus Diggle",
            "Katie Bell",
            "Amos Diggory",
            "Cedric Diggory",
            "Elphias Doge",
            "Antonin Dolohov",
            "Aberforth Dumbledore",
            "Albus Dumbledore",
            "Ariana Dumbledore",
            "Dudley Dursley",
            "Cuthbert Binns",
            "Majorie Dursley",
            "Petunia Dursley",
            "Vernon Dursley",
            "Marietta Edgecombe",
            "Arabella Figg",
            "Argus Filch",
            "Justin Finch-Fletchley",
            "Seamus Finnigan",
            "Regulus Black",
            "Mundungus Fletcher",
            "Filius Flitwick",
            "Cornelius Fudge",
            "Marvolo Gaunt",
            "Merope Gaunt",
            "Morfin Gaunt",
            "Anthony Goldstein",
            "Goyle Sr",
            "Gregory Goyle",
            "Hermione Granger",
            "Sirius Black",
            "Gregorovitch",
            "Fenrir Greyback",
            "Gellert Grindelwald",
            "Wilhelmina Grubbly-Plank",
            "Godric Gryffindor",
            "Rubeus Hagrid",
            "Rolanda Hooch",
            "Helga Hufflepuff",
            "Angelina Johnson",
            "Lee Jordan",
            "Amelia Bones",
            "Igor Karkaroff",
            "Viktor Krum",
            "Bellatrix Lestrange",
            "Gilderoy Lockhart",
            "Alice Longbottom",
            "Augusta Longbottom",
            "Frank Longbottom",
            "Neville Longbottom",
            "Susan Bones",
            "Luna Lovegood",
            "Xenophilius Lovegood",
            "Remus Lupin",
            "Teddy Lupin",
            "Draco Malfoy",
            "Lucius Malfoy",
            "Narcissa Malfoy",
            "Olympe Maxime",
            "Ernie Macmillan",
            "Minerva McGonagall",
            "Terry Boot",
            "Cormac McLaggen",
            "Alaster \"Mad-Eye\" Moody",
            "Theodore Nott",
            "Bob Ogden",
            "Tiberius Ogden",
            "Garrick Ollivander",
            "Pansy Parkinson",
            "Padma Patil",
            "Parvati Patil",
            "Peter Pettigrew"
        ];
        error_reporting(E_ALL);
        for ($i = 2; $i < 3; $i++) {
            $chapter_text = $chapters[$i];
            echo($chapter_text);
            echo("\n");
        }
    }
}